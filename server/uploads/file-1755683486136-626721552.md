前言

这篇真的是呕心沥血了,一些很关键很常用的js知识被我记录下来了,在开发中真的会使用上

## 检查数据类型

`typeof`

## 字符串常用方法

| 方法          | 用法                             | 详细解释                                           | 示例                                                         |
| ------------- | -------------------------------- | -------------------------------------------------- | ------------------------------------------------------------ |
| `length`      | `str.length`                     | 获取字符串的长度（字符个数）                       | `'hello'.length // 5`                                        |
| `charAt`      | `str.charAt(index)`              | 获取指定位置的字符，索引从 0 开始                  | `'hello'.charAt(1) // 'e'`                                   |
| `charCodeAt`  | `str.charCodeAt(index)`          | 获取指定字符的 Unicode 编码                        | `'A'.charCodeAt(0) // 65`                                    |
| `indexOf`     | `str.indexOf('a')`               | 查找指定字符/子串首次出现的位置，找不到返回 -1     | `'banana'.indexOf('a') // 1`                                 |
| `lastIndexOf` | `str.lastIndexOf('a')`           | 查找指定字符/子串最后一次出现的位置                | `'banana'.lastIndexOf('a') // 5`                             |
| `includes`    | `str.includes('a')`              | 判断字符串是否包含指定内容，返回 `true` 或 `false` | `'apple'.includes('p') // true`                              |
| `startsWith`  | `str.startsWith('a')`            | 判断是否以指定内容开头                             | `'apple'.startsWith('a') // true`                            |
| `endsWith`    | `str.endsWith('e')`              | 判断是否以指定内容结尾                             | `'apple'.endsWith('e') // true`                              |
| `slice`       | `str.slice(start, end)`          | 截取字符串，支持负数，取头不取尾                   | `'hello'.slice(1, 4) // 'ell'`                               |
| `substring`   | `str.substring(start, end)`      | 截取字符串，不支持负数，取头不取尾                 | `'hello'.substring(1, 4) // 'ell'`                           |
| `substr`      | `str.substr(start, length)`      | 从指定位置开始，截取指定长度（已废弃，不推荐）     | `'hello'.substr(1, 3) // 'ell'`                              |
| `toUpperCase` | `str.toUpperCase()`              | 转为全大写                                         | `'hello'.toUpperCase() // 'HELLO'`                           |
| `toLowerCase` | `str.toLowerCase()`              | 转为全小写                                         | `'HELLO'.toLowerCase() // 'hello'`                           |
| `trim`        | `str.trim()`                     | 去除首尾空格                                       | `'  hi  '.trim() // 'hi'`                                    |
| `split`       | `str.split('分隔符')`            | 按分隔符拆分为数组                                 | `'a,b,c'.split(',') // ['a','b','c']`                        |
| `replace`     | `str.replace('旧', '新')`        | 替换首次出现的内容，正则可全局替换                 | `'a-b-c'.replace('-', '+') // 'a+b-c'``'a-b-c'.replace(/-/g, '+') // 'a+b+c'` |
| `match`       | `str.match(/正则/)`              | 匹配内容，返回数组或 null                          | `'a1b2c3'.match(/\d/g) // ['1','2','3']`                     |
| `search`      | `str.search(/正则/)`             | 查找匹配内容首次出现的位置                         | `'a1b2c3'.search(/\d/) // 1`                                 |
| `repeat`      | `str.repeat(n)`                  | 返回重复 n 次的新字符串                            | `'ha'.repeat(3) // 'hahaha'`                                 |
| `padStart`    | `str.padStart(长度, '补齐内容')` | 头部补齐到指定长度                                 | `'5'.padStart(3, '0') // '005'`                              |
| `padEnd`      | `str.padEnd(长度, '补齐内容')`   | 尾部补齐到指定长度                                 | `'5'.padEnd(3, '0') // '500'`                                |







## 数组常用方法

| 方法        | 用法                                          | 详细解释                                   | 示例                                                      |
| ----------- | --------------------------------------------- | ------------------------------------------ | --------------------------------------------------------- |
| `push`      | `arr.push(item)`                              | 向数组**尾部添加**元素，返回新数组长度     | `[1, 2].push(3) // 返回 3，数组变为 [1, 2, 3]`            |
| `pop`       | `arr.pop()`                                   | 删除数组**最后一个元素**，返回被删除的元素 | `[1, 2, 3].pop() // 返回 3，数组变为 [1, 2]`              |
| `unshift`   | `arr.unshift(item)`                           | 向数组**头部添加**元素，返回新数组长度     | `[2, 3].unshift(1) // 返回 3，数组变为 [1, 2, 3]`         |
| `shift`     | `arr.shift()`                                 | 删除数组**第一个元素**，返回被删除的元素   | `[1, 2, 3].shift() // 返回 1，数组变为 [2, 3]`            |
| `splice`    | `arr.splice(start, deleteCount, item1, ...)`  | 删除、替换或插入元素，直接修改原数组       | `arr.splice(1, 2, 'a') // 删除索引 1 开始 2 个，插入 'a'` |
| `slice`     | `arr.slice(start, end)`                       | 截取数组，返回新数组，不改变原数组         | `[1, 2, 3, 4].slice(1, 3) // [2, 3]`                      |
| `concat`    | `arr.concat(arr2)`                            | 合并数组，返回新数组，不影响原数组         | `[1, 2].concat([3, 4]) // [1, 2, 3, 4]`                   |
| `forEach`   | `arr.forEach(item => {...})`                  | 遍历数组，对每个元素执行函数，无法中断     | `arr.forEach(item => console.log(item))`                  |
| `map`       | `arr.map(item => item * 2)`                   | 遍历数组，返回处理后的新数组               | `[1, 2].map(x => x * 2) // [2, 4]`                        |
| `filter`    | `arr.filter(item => 条件)`                    | 返回满足条件的新数组                       | `[1, 2, 3].filter(x => x > 1) // [2, 3]`                  |
| `reduce`    | `arr.reduce((acc, cur) => acc + cur, 初始值)` | 累加、归并，返回最终结果                   | `[1, 2, 3].reduce((a, b) => a + b, 0) // 6`               |
| `find`      | `arr.find(item => 条件)`                      | 找到第一个满足条件的元素                   | `[1, 2, 3].find(x => x > 1) // 2`                         |
| `findIndex` | `arr.findIndex(item => 条件)`                 | 找到第一个满足条件的索引                   | `[1, 2, 3].findIndex(x => x > 1) // 1`                    |
| `indexOf`   | `arr.indexOf(item)`                           | 查找元素首次出现的位置，找不到返回 -1      | `[1, 2, 3].indexOf(2) // 1`                               |
| `includes`  | `arr.includes(item)`                          | 判断数组是否包含某个元素                   | `[1, 2, 3].includes(2) // true`                           |
| `sort`      | `arr.sort((a, b) => a - b)`                   | 排序，默认字符串排序，数字需自定义排序函数 | `[3, 1, 2].sort((a, b) => a - b) // [1, 2, 3]`            |
| `reverse`   | `arr.reverse()`                               | 反转数组顺序                               | `[1, 2, 3].reverse() // [3, 2, 1]`                        |
| `join`      | `arr.join('-')`                               | 数组转字符串，指定分隔符                   | `[1, 2, 3].join('-') // '1-2-3'`                          |
| `every`     | `arr.every(item => 条件)`                     | 检查所有元素是否都满足条件                 | `[1, 2, 3].every(x => x > 0) // true`                     |
| `some`      | `arr.some(item => 条件)`                      | 检查是否至少有一个元素满足条件             | `[1, 2, 3].some(x => x > 2) // true`                      |



Math常用方法

| 方法          | 用法                    | 详细解释                      | 示例                       |
| ------------- | ----------------------- | ----------------------------- | -------------------------- |
| `Math.abs`    | `Math.abs(x)`           | 返回绝对值                    | `Math.abs(-5) // 5`        |
| `Math.ceil`   | `Math.ceil(x)`          | 向上取整                      | `Math.ceil(2.3) // 3`      |
| `Math.floor`  | `Math.floor(x)`         | 向下取整                      | `Math.floor(2.9) // 2`     |
| `Math.round`  | `Math.round(x)`         | 四舍五入                      | `Math.round(2.5) // 3`     |
| `Math.trunc`  | `Math.trunc(x)`         | 直接去掉小数部分（向 0 取整） | `Math.trunc(2.9) // 2`     |
| `Math.max`    | `Math.max(x1, x2, ...)` | 返回最大值                    | `Math.max(1, 5, 3) // 5`   |
| `Math.min`    | `Math.min(x1, x2, ...)` | 返回最小值                    | `Math.min(1, 5, 3) // 1`   |
| `Math.pow`    | `Math.pow(x, y)`        | 返回 x 的 y 次幂              | `Math.pow(2, 3) // 8`      |
| `Math.sqrt`   | `Math.sqrt(x)`          | 开平方                        | `Math.sqrt(9) // 3`        |
| `Math.random` | `Math.random()`         | 返回 0 ~ 1 的随机数（不含 1） | `Math.random() // 0.xxx`   |
| `Math.PI`     | `Math.PI`               | 圆周率常量                    | `Math.PI // 3.1415...`     |
| `Math.E`      | `Math.E`                | 自然常数 e（约 2.718）        | `Math.E // 2.718...`       |
| `Math.log`    | `Math.log(x)`           | 计算以 e 为底的对数           | `Math.log(Math.E) // 1`    |
| `Math.exp`    | `Math.exp(x)`           | 计算 e 的 x 次幂              | `Math.exp(1) // 2.718...`  |
| `Math.sin`    | `Math.sin(x)`           | 正弦（x 单位为弧度）          | `Math.sin(Math.PI/2) // 1` |
| `Math.cos`    | `Math.cos(x)`           | 余弦（x 单位为弧度）          | `Math.cos(0) // 1`         |
| `Math.tan`    | `Math.tan(x)`           | 正切（x 单位为弧度）          | `Math.tan(0) // 0`         |



**生成指定范围随机整数：**

```js
// 生成 min 到 max（含 min 和 max）的随机整数
function getRandomInt(min, max) {
  return Math.floor(Math.random() * (max - min + 1)) + min;
}

console.log(getRandomInt(1, 10)); // 可能输出 1~10 之间的随机整数

```



## Json

在 JavaScript 中，`JSON` 对象主要有两个方法：

| 方法             | 用法                     | 详细解释                                       | 示例                                 |
| ---------------- | ------------------------ | ---------------------------------------------- | ------------------------------------ |
| `JSON.stringify` | `JSON.stringify(obj)`    | 将 **JavaScript 对象/数组 转换为 JSON 字符串** | `JSON.stringify({a:1}) // '{"a":1}'` |
| `JSON.parse`     | `JSON.parse(jsonString)` | 将 **JSON 字符串 转换为 JavaScript 对象**      | `JSON.parse('{"a":1}') // {a:1}`     |



## Date

### 一、日期对象创建

1. 创建当前时间

```
let now = new Date();
console.log(now); // 当前日期时间对象
```

2. 指定时间创建

```
let date1 = new Date('2024-07-04T12:00:00'); // 推荐，ISO 格式
let date2 = new Date(2024, 6, 4, 12, 0, 0); // 注意月份从 0 开始
```

3. 毫秒时间戳创建

```
let date3 = new Date(1720070400000); // 毫秒数
```

------

### 二、日期获取方法

| 方法              | 用法                     | 说明                     | 示例            |
| ----------------- | ------------------------ | ------------------------ | --------------- |
| `getFullYear`     | `date.getFullYear()`     | 获取年份                 | `2024`          |
| `getMonth`        | `date.getMonth()`        | 获取月份（0-11）         | `6`（表示7月）  |
| `getDate`         | `date.getDate()`         | 获取日（1-31）           | `4`             |
| `getDay`          | `date.getDay()`          | 获取星期（0-6，0是周日） | `4`（表示周四） |
| `getHours`        | `date.getHours()`        | 获取小时（0-23）         | `12`            |
| `getMinutes`      | `date.getMinutes()`      | 获取分钟                 | `30`            |
| `getSeconds`      | `date.getSeconds()`      | 获取秒数                 | `15`            |
| `getMilliseconds` | `date.getMilliseconds()` | 获取毫秒                 | `500`           |
| `getTime`         | `date.getTime()`         | 获取时间戳（毫秒）       | `1720070400000` |



------

### 三、日期设置方法

| 方法              | 用法                      | 说明             |
| ----------------- | ------------------------- | ---------------- |
| `setFullYear`     | `date.setFullYear(2025)`  | 设置年份         |
| `setMonth`        | `date.setMonth(11)`       | 设置月份（0-11） |
| `setDate`         | `date.setDate(15)`        | 设置日期         |
| `setHours`        | `date.setHours(10)`       | 设置小时         |
| `setMinutes`      | `date.setMinutes(45)`     | 设置分钟         |
| `setSeconds`      | `date.setSeconds(30)`     | 设置秒数         |
| `setMilliseconds` | `date.setMilliseconds(0)` | 设置毫秒         |



------

### 四、日期格式化

| 方法                 | 用法                        | 说明                           |
| -------------------- | --------------------------- | ------------------------------ |
| `toString`           | `date.toString()`           | 默认字符串格式                 |
| `toDateString`       | `date.toDateString()`       | 只显示日期                     |
| `toTimeString`       | `date.toTimeString()`       | 只显示时间                     |
| `toLocaleString`     | `date.toLocaleString()`     | 按当前地区格式显示完整日期时间 |
| `toLocaleDateString` | `date.toLocaleDateString()` | 按当前地区格式显示日期         |
| `toLocaleTimeString` | `date.toLocaleTimeString()` | 按当前地区格式显示时间         |
| `toISOString`        | `date.toISOString()`        | ISO 标准格式（推荐前后端传递） |
| `toUTCString`        | `date.toUTCString()`        | UTC 时间字符串                 |



------

### 五、时间运算

✅ 获取当前时间戳

```
let timestamp = Date.now(); // 推荐，简写
let timestamp2 = new Date().getTime(); // 旧写法
```

✅ 时间加减

```js
let date = new Date();
date.setDate(date.getDate() + 7); // 当前日期 + 7 天

date.setHours(date.getHours() - 3); // 当前时间 - 3 小时
```

✅ 时间差计算

```js
let d1 = new Date('2024-07-01');
let d2 = new Date('2024-07-04');
let diffMs = d2 - d1; // 相差的毫秒数
let diffDays = diffMs / (1000 * 60 * 60 * 24); // 相差天数
console.log(diffDays); // 3
```

------

### 六、常用场景总结

| 场景             | 使用方法                            |
| ---------------- | ----------------------------------- |
| 获取当前时间戳   | `Date.now()`                        |
| 格式化显示       | `toLocaleString()`、`toISOString()` |
| 计算日期偏移     | `setDate()`、`setHours()`           |
| 计算时间间隔     | `两个时间对象相减`                  |
| 获取年月日时分秒 | `getFullYear()`、`getMonth()` 等    |



------

### 七、实用时间格式化函数（秒懂）

```js
function formatDate(date) {
  let y = date.getFullYear();
  let m = String(date.getMonth() + 1).padStart(2, '0');
  let d = String(date.getDate()).padStart(2, '0');
  let h = String(date.getHours()).padStart(2, '0');
  let min = String(date.getMinutes()).padStart(2, '0');
  let s = String(date.getSeconds()).padStart(2, '0');
  return `${y}-${m}-${d} ${h}:${min}:${s}`;
}

console.log(formatDate(new Date())); // 2025-07-04 18:30:00
```





## 复杂数据类型用法

### Set(集合)

**核心特点**

- 成员唯一（自动去重）
- 无重复元素
- 顺序插入，按插入顺序遍历
- 类型可以是任意类型（对象、基本类型均可）

**它的主要方法如下：**

- `new Set(iterable)` —— 创建一个 `set`，如果提供了一个 `iterable` 对象（通常是数组），将会从数组里面复制值到 `set` 中。
- `set.add(value)` —— 添加一个值，返回 set 本身
- `set.delete(value)` —— 删除值，如果 `value` 在这个方法调用的时候存在则返回 `true` ，否则返回 `false`。
- `set.has(value)` —— 如果 `value` 在 set 中，返回 `true`，否则返回 `false`。
- `set.clear()` —— 清空 set。
- `set.size` —— 返回元素个数。

**详细用法**

```js
let set = new Set([1,2,3,4,5]); //自动去重

et.add(4); // 添加元素
set.delete(2); // 删除元素
set.has(3); // 判断是否存在，返回 true
set.clear(); // 清空所有元素

console.log(set.size); // 获取元素数量
set.forEach(item => console.log(item)); // 遍历

let arr = [...set]; // Set 转数组
```

**适用场景**

| 场景                                 | 说明                             |
| ------------------------------------ | -------------------------------- |
| 数组去重                             | `let unique = [...new Set(arr)]` |
| 判断是否存在（比数组 includes 更快） | `set.has(item)`                  |
| 多集合交集、并集、差集操作           | 适合处理集合类问题               |
| 记录已访问过的节点或页面             | 适合高频查找                     |
| 存储不重复的对象引用                 | 可以混合对象和基本类型           |

### Map(映射)

**核心特点**

- 键值对存储
- 键可以是任何数据类型（包括对象、函数）
- 保持插入顺序
- 比普通对象更强大、更高效

**它的方法和属性如下：**

- `new Map()` —— 创建 map。
- `map.set(key, value)` —— 根据键存储值。
- `map.get(key)` —— 根据键来返回值，如果 `map` 中不存在对应的 `key`，则返回 `undefined`。
- `map.has(key)` —— 如果 `key` 存在则返回 `true`，否则返回 `false`。
- `map.delete(key)` —— 删除指定键的值。
- `map.clear()` —— 清空 map。
- `map.size` —— 返回当前元素个数。

**详细用法**

```js
let map = new Map();

map.set('name', 'mmx');
map.set(123, 'number');
map.set({ key: 'obj' }, 'value');

console.log(map.get('name')); // 获取值
map.has(123); // 判断是否存在
map.delete(123); // 删除元素
map.clear(); // 清空

console.log(map.size); // Map 长度
map.forEach((value, key) => console.log(key, value)); // 遍历

```

#### Map 迭代

如果要在 `map` 里使用循环，可以使用以下三个方法：

- `map.keys()` —— 遍历并返回一个包含所有键的可迭代对象，
- `map.values()` —— 遍历并返回一个包含所有值的可迭代对象，
- `map.entries()` —— 遍历并返回一个包含所有实体 `[key, value]` 的可迭代对象，`for..of` 在默认情况下使用的就是这个。

例如：

```javascript
let recipeMap = new Map([
  ['cucumber', 500],
  ['tomatoes', 350],
  ['onion',    50]
]);

// 遍历所有的键（vegetables）
for (let vegetable of recipeMap.keys()) {
  alert(vegetable); // cucumber, tomatoes, onion
}

// 遍历所有的值（amounts）
for (let amount of recipeMap.values()) {
  alert(amount); // 500, 350, 50
}

// 遍历所有的实体 [key, value]
for (let entry of recipeMap) { // 与 recipeMap.entries() 相同
  alert(entry); // cucumber,500 (and so on)
}
```



# 常用js技巧

### 数组去重

```js
const arr = [1, 2, 2, 3, 4, 4, 5];
const uniqueArr = [...new Set(arr)];
console.log(uniqueArr); // [1, 2, 3, 4, 5]
```

### 合并多个数组

```js
const arr1 = [1, 2];
const arr2 = [3, 4];
const arr3 = [5, 6];
const mergedArr = [...arr1, ...arr2, ...arr3];
console.log(mergedArr); // [1, 2, 3, 4, 5, 6]

```

### 解构赋值

```js
// 数组
const arr = [1, 2, 3];
const [a, b, c] = arr;
console.log(a); // 1
console.log(b); // 2
console.log(c); // 3

// 对象
const obj = { name: 'John', age: 30 };
const { name, age } = obj;
console.log(name); // 'John'
console.log(age); // 30
```

### 交换变量值

```js
let a = 1;
let b = 2;
[a, b] = [b, a];
console.log(a); // 2
console.log(b); // 1
```

### 可选链操作符

```js
const obj = {
  person: {
    name: 'John'
  }
};
const name = obj?.person?.name;
console.log(name); // 'John'

```

### 数组过滤

```js
const numbers = [1, 2, 3, 4, 5];
const evenNumbers = numbers.filter(num => num % 2 === 0);
console.log(evenNumbers); // [2, 4]
// filter 方法用于创建一个新数组，其中包含满足指定条件的元素
```

### 数组映射

```js
const numbers = [1, 2, 3];
const doubled = numbers.map(num => num * 2);
console.log(doubled); // [2, 4, 6]

```

### 数组查找

```js
const numbers = [1, 2, 3, 4, 5];
const found = numbers.find(num => num > 3);
console.log(found); // 4

```

### 数组查找索引

```js
const numbers = [1, 2, 3, 4, 5];
const index = numbers.findIndex(num => num > 3);
console.log(index); // 3

```

### 字符串转数字 & 数字转字符串

```js
const str = '123';
const num = +str;
console.log(num); // 123


const num = 123;
const str = num.toString();
console.log(str); // '123'
```

###  动态创建对象属性

```js
const key = 'name';
const value = 'John';
const obj = { [key]: value };
console.log(obj); // { name: 'John' }

```

### 延迟执行函数

```js
function greet() {
  console.log('Hello!');
}
setTimeout(greet, 2000); // 2 秒后输出 'Hello!'
```

### 定时执行函数

```js
function greet() {
  console.log('Hello!');
}
setInterval(greet, 2000); // 每 2 秒输出一次 'Hello!'

// 取消定时任务
function greet() {
  console.log('Hello!');
}
const intervalId = setInterval(greet, 2000);
clearInterval(intervalId); // 取消定时任务
```

### 拷贝对象

```js
// 浅拷贝 使用扩展运算符可以实现对象的浅拷贝
const obj1 = { a: 1, b: 2 };
const obj2 = { ...obj1 };
console.log(obj2); // { a: 1, b: 2 }

// 深拷贝
const obj1 = { a: 1, b: { c: 2 } };
const obj2 = JSON.parse(JSON.stringify(obj1));
console.log(obj2); // { a: 1, b: { c: 2 } }
// 使用 JSON.parse 和 JSON.stringify 可以实现对象的深拷贝，但这种方法有局限性，不能处理函数、正则表达式等特殊对象。
```

### 类的继承

```js
class Animal {
  constructor(name) {
    this.name = name;
  }
  speak() {
    console.log(`${this.name} makes a noise.`);
  }
}

class Dog extends Animal {
  speak() {
    console.log(`${this.name} barks.`);
  }
}

const dog = new Dog('Buddy');
dog.speak(); // 'Buddy barks.'

```



### 对象的值

```js
// 检查对象是否有某个属性
const obj = { name: 'John' };
const hasName = 'name' in obj;
console.log(hasName); // true

// 获取对象的所有属性名
const obj = { a: 1, b: 2 };
const keys = Object.keys(obj);
console.log(keys); // ['a', 'b']

//  获取对象的所有属性值
const obj = { a: 1, b: 2 };
const values = Object.values(obj);
console.log(values); // [1, 2]

// 获取对象的所有属性键值对
const obj = { a: 1, b: 2 };
const entries = Object.entries(obj);
console.log(entries); // [['a', 1], ['b', 2]]

```

### 防抖函数

```js
function debounce(func, delay) {
  let timer;
  return function () {
    const context = this;
    const args = arguments;
    clearTimeout(timer);
    timer = setTimeout(() => {
      func.apply(context, args);
    }, delay);
  };
}

function search() {
  console.log('Searching...');
}

const debouncedSearch = debounce(search, 500);
window.addEventListener('input', debouncedSearch);

```

### 节流函数

```js
function throttle(func, limit) {
  let inThrottle;
  return function () {
    const context = this;
    const args = arguments;
    if (!inThrottle) {
      func.apply(context, args);
      inThrottle = true;
      setTimeout(() => (inThrottle = false), limit);
    }
  };
}

function scroll() {
  console.log('Scrolling...');
}

const throttledScroll = throttle(scroll, 500);
window.addEventListener('scroll', throttledScroll);

```

### 异步函数

```js
async function fetchData() {
  try {
    const response = await fetch('https://api.example.com/data');
    const data = await response.json();
    console.log(data);
  } catch (error) {
    console.error(error);
  }
}

fetchData();

```

### 事件委托

```js
const ul = document.querySelector('ul');
ul.addEventListener('click', function (event) {
  if (event.target.tagName === 'LI') {
    console.log('Clicked on a list item:', event.target.textContent);
  }
});

```





### 一个对数据增删改查的案例

